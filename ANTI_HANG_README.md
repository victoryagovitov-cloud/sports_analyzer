# üõ°Ô∏è –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∑–∞–≤–∏—Å–∞–Ω–∏—è —á–∞—Ç-–±–æ—Ç–∞

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### 1. **HTTP-–∑–∞–ø—Ä–æ—Å—ã —Å —Ç–∞–π–º–∞—É—Ç–∞–º–∏** 
- ‚úÖ –í—Å–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã —Ç–µ–ø–µ—Ä—å –∏–º–µ—é—Ç —Ç–∞–π–º–∞—É—Ç—ã (30 —Å–µ–∫)
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏–π –¥–ª—è —Å–µ—Ç–µ–≤—ã—Ö –æ—à–∏–±–æ–∫
- ‚úÖ –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø—Ä–∏ —Å–±–æ—è—Ö (–¥–æ 3 —Ä–∞–∑ —Å –∑–∞–¥–µ—Ä–∂–∫–æ–π 5 —Å–µ–∫)

### 2. **–£–ª—É—á—à–µ–Ω–Ω—ã–µ —Ü–∏–∫–ª—ã —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏—è**
- ‚úÖ –ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª `while` —Å –æ–±—Ä–∞–±–æ—Ç–∫–æ–π –∏—Å–∫–ª—é—á–µ–Ω–∏–π
- ‚úÖ –¢–∞–π–º–∞—É—Ç—ã –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ (–º–∞–∫—Å–∏–º—É–º 5 –º–∏–Ω—É—Ç –Ω–∞ —Ü–∏–∫–ª)
- ‚úÖ Graceful shutdown –ø—Ä–∏ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö –æ—à–∏–±–∫–∞—Ö

### 3. **–°–∏—Å—Ç–µ–º–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Watchdog)**
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø–∞–º—è—Ç–∏ (–º–∞–∫—Å 80%)
- ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–≥—Ä—É–∑–∫–∏ CPU
- ‚úÖ Heartbeat –ø—Ä–æ–≤–µ—Ä–∫–∏ –∫–∞–∂–¥—ã–µ 60 —Å–µ–∫—É–Ω–¥
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

### 4. **–£–ª—É—á—à–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ –º–µ—Ç–æ–¥—ã –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –º–∞—Ç—á–∞
- ‚úÖ –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫

### 5. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å —Ç–∞–π–º–∞—É—Ç–∞–º–∏**
```python
ANALYSIS_SETTINGS = {
    'http_timeout_seconds': 30,        # HTTP —Ç–∞–π–º–∞—É—Ç
    'analysis_timeout_seconds': 300,   # –¢–∞–π–º–∞—É—Ç –∞–Ω–∞–ª–∏–∑–∞ (5 –º–∏–Ω)
    'max_retries': 3,                  # –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏
    'retry_delay_seconds': 5,          # –ó–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏
    'watchdog_interval_seconds': 60,   # –ò–Ω—Ç–µ—Ä–≤–∞–ª watchdog
    'max_memory_usage_percent': 80     # –ú–∞–∫—Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ø–∞–º—è—Ç–∏
}
```

## üöÄ –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —É–ª—É—á—à–µ–Ω–Ω—É—é —Å–∏—Å—Ç–µ–º—É

### –ù–æ–≤—ã–π –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –∑–∞–ø—É—Å–∫:
```bash
# –û–¥–∏–Ω–æ—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Å –∑–∞—â–∏—Ç–æ–π –æ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏—è
python3 start_improved.py single

# –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –∞–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–æ–º
python3 start_improved.py continuous
```

### –°—Ç–∞—Ä—ã–π —Å–ø–æ—Å–æ–± (—Ç–æ–∂–µ —É–ª—É—á—à–µ–Ω):
```bash
# –û–¥–∏–Ω–æ—á–Ω—ã–π –∞–Ω–∞–ª–∏–∑
python3 start_production.py single

# –ù–µ–ø—Ä–µ—Ä—ã–≤–Ω–∞—è —Ä–∞–±–æ—Ç–∞
python3 start_production.py continuous
```

## üîß –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 1. **–°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ**
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–±–æ–¥–Ω–æ–π –ø–∞–º—è—Ç–∏ (–º–∏–Ω 500 –ú–ë)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ –º–µ—Å—Ç–∞ (–º–∏–Ω 1 –ì–ë)
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤—Å–µ—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

### 2. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫**
- –î–æ 5 –ø–æ–ø—ã—Ç–æ–∫ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏ —Å–±–æ—è—Ö
- 30-—Å–µ–∫—É–Ω–¥–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –º–µ–∂–¥—É –ø–æ–ø—ã—Ç–∫–∞–º–∏
- –ü–æ–ª–Ω–æ–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö

### 3. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ**
```bash
# –õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª—ã:
improved_production.log    # –î–ª—è start_improved.py
production.log            # –î–ª—è start_production.py
live_betting_analysis.log # –î–ª—è main.py
```

### 4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**
```
üíö –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–æ—Ä–º–∞–ª—å–Ω–æ - CPU: 15.2%, RAM: 45.8%, –î–∏—Å–∫: 23.1%
‚ö†Ô∏è  –í—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏: 85%
‚ö†Ô∏è  –í—ã—Å–æ–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ CPU: 95%
```

## üõ°Ô∏è –ó–∞—â–∏—Ç–∞ –æ—Ç –æ—Å–Ω–æ–≤–Ω—ã—Ö –ø—Ä–∏—á–∏–Ω –∑–∞–≤–∏—Å–∞–Ω–∏—è

### 1. **–ë–µ—Å–∫–æ–Ω–µ—á–Ω—ã–µ HTTP-–∑–∞–ø—Ä–æ—Å—ã** ‚Üí ‚úÖ –¢–∞–π–º–∞—É—Ç—ã 30 —Å–µ–∫
### 2. **–ó–∞–≤–∏—Å–∞–Ω–∏–µ –ø–∞—Ä—Å–µ—Ä–∞** ‚Üí ‚úÖ –¢–∞–π–º–∞—É—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ 5 –º–∏–Ω
### 3. **–£—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏** ‚Üí ‚úÖ –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
### 4. **–ù–µ—Ä–∞–±–æ—Ç–∞—é—â–∏–µ —Å–∞–π—Ç—ã** ‚Üí ‚úÖ –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –∏ fallback
### 5. **–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏** ‚Üí ‚úÖ Graceful shutdown –∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–∏—Å—Ç–µ–º—ã

### –õ–æ–≥–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
tail -f improved_production.log

# –ü–æ–∏—Å–∫ –æ—à–∏–±–æ–∫
grep "ERROR\|‚ùå" improved_production.log

# –ü–æ–∏—Å–∫ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
grep "WARNING\|‚ö†Ô∏è" improved_production.log

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ watchdog
grep "watchdog\|üíö\|‚ö†Ô∏è" improved_production.log
```

### –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Ä–µ—Å—É—Ä—Å–æ–≤
htop
free -h
df -h

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ Python
ps aux | grep python
```

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤

–í —Ñ–∞–π–ª–µ `config.py` –º–æ–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```python
# –î–ª—è –º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ —É–≤–µ–ª–∏—á—å—Ç–µ HTTP —Ç–∞–π–º–∞—É—Ç—ã
'http_timeout_seconds': 60,

# –î–ª—è —Å–ª–æ–∂–Ω–æ–≥–æ –∞–Ω–∞–ª–∏–∑–∞ —É–≤–µ–ª–∏—á—å—Ç–µ —Ç–∞–π–º–∞—É—Ç –∞–Ω–∞–ª–∏–∑–∞
'analysis_timeout_seconds': 600,  # 10 –º–∏–Ω—É—Ç

# –î–ª—è —á–∞—Å—Ç—ã—Ö —Å–±–æ–µ–≤ —É–≤–µ–ª–∏—á—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫
'max_retries': 5,

# –î–ª—è –±—ã—Å—Ç—Ä—ã—Ö –º–∞—à–∏–Ω —É–º–µ–Ω—å—à–∏—Ç–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª watchdog
'watchdog_interval_seconds': 30,
```

## üÜò –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º

### –ï—Å–ª–∏ —Å–∏—Å—Ç–µ–º–∞ –≤—Å–µ –µ—â–µ –∑–∞–≤–∏—Å–∞–µ—Ç:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:**
```bash
tail -50 improved_production.log
```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å –∫–æ—Ä–æ—Ç–∫–∏–º —Ç–∞–π–º–∞—É—Ç–æ–º:**
```bash
timeout 300 python3 start_improved.py single
```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã:**
```bash
free -h && df -h && ps aux | grep python
```

4. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ strace –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:**
```bash
strace -p $(pgrep -f start_improved) -e trace=network
```

### –ï—Å–ª–∏ Telegram –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
```bash
python3 test_telegram.py
```

### –ï—Å–ª–∏ –∞–Ω–∞–ª–∏–∑ –Ω–µ –Ω–∞—Ö–æ–¥–∏—Ç –º–∞—Ç—á–∏:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–∞–π—Ç–æ–≤
curl -I https://betzona.ru/live-futbol.html
curl -I https://scores24.live/ru/soccer?matchesFilter=live
```

## üìà –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
```bash
# –ó–∞–ø—É—Å–∫ –≤ screen/tmux
screen -S truelivebet
python3 start_improved.py continuous

# –ò–ª–∏ –∫–∞–∫ systemd —Å–µ—Ä–≤–∏—Å
sudo systemctl start truelivebet
```

### –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:
```bash
# –ë—ã—Å—Ç—Ä—ã–π —Ç–µ—Å—Ç
python3 start_improved.py single

# –¢–µ—Å—Ç —Å —Ç–∞–π–º–∞—É—Ç–æ–º
timeout 60 python3 start_improved.py single
```

### –î–ª—è –æ—Ç–ª–∞–¥–∫–∏:
```bash
# –ó–∞–ø—É—Å–∫ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º–∏ –ª–æ–≥–∞–º–∏
python3 -u start_improved.py single 2>&1 | tee debug.log
```

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ **–ó–∞–≤–∏—Å–∞–Ω–∏—è —É—Å—Ç—Ä–∞–Ω–µ–Ω—ã** - —Å–∏—Å—Ç–µ–º–∞ –Ω–µ –º–æ–∂–µ—Ç –∑–∞–≤–∏—Å–Ω—É—Ç—å –±–æ–ª–µ–µ —á–µ–º –Ω–∞ 5 –º–∏–Ω—É—Ç  
‚úÖ **–ê–≤—Ç–æ–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫** - —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ —Å–±–æ–µ–≤  
‚úÖ **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –ø–æ–ª–Ω–∞—è –≤–∏–¥–∏–º–æ—Å—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã  
‚úÖ **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å** - —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç —Ä–∞–±–æ—Ç—É –¥–∞–∂–µ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö  

**–í–∞—à —á–∞—Ç-–±–æ—Ç —Ç–µ–ø–µ—Ä—å –∑–∞—â–∏—â–µ–Ω –æ—Ç –∑–∞–≤–∏—Å–∞–Ω–∏—è! üõ°Ô∏è**